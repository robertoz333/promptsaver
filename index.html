function closeAllInputForms() {
    document.getElementById('newPromptForm').style.display = 'none';
    document.getElementById('editPromptForm').style.display = 'none';
}

function createCategoryElement(category, index) {
    var categoryDiv = document.createElement('div');
    categoryDiv.className = 'category';
    categoryDiv.innerHTML = `
    <div class="category-header">
        <h3>${category.name}</h3>
        <div class="category-buttons">
            <button class="btn btn-new new-prompt-btn">Nuovo prompt</button>
            <button class="btn btn-delete delete-category-btn">Elimina categoria</button>
        </div>
    </div>
    <div class="prompt-input" style="display: none;">
        <input type="text" class="new-prompt-title" placeholder="Titolo del prompt">
        <textarea class="new-prompt-text" placeholder="Testo del prompt"></textarea>
        <button class="btn btn-new add-prompt-btn">Aggiungi</button>
    </div>
    <div class="prompts-container" style="display: none;"></div>
    `;

    var categoryHeader = categoryDiv.querySelector('.category-header');
    var newPromptBtn = categoryDiv.querySelector('.new-prompt-btn');
    var promptInput = categoryDiv.querySelector('.prompt-input');
    var addPromptBtn = categoryDiv.querySelector('.add-prompt-btn');
    var deleteCategoryBtn = categoryDiv.querySelector('.delete-category-btn');
    var newPromptTitle = categoryDiv.querySelector('.new-prompt-title');
    var newPromptText = categoryDiv.querySelector('.new-prompt-text');
    var promptsContainer = categoryDiv.querySelector('.prompts-container');

    categoryHeader.addEventListener('click', function (event) {
        if (!event.target.closest('button')) {
            closeAllInputForms(); // Chiude tutti i form di input aperti
            closeAllPrompts(); // Chiude tutti i prompt aperti
            promptsContainer.style.display = promptsContainer.style.display === 'none' ? 'block' : 'none';
        }
    });

    newPromptBtn.addEventListener('click', function (event) {
        event.stopPropagation();
        promptInput.style.display = 'flex'; // Mostra il form di input per nuovo prompt
        currentCategoryIndex = index; // Imposta l'indice della categoria corrente
        document.getElementById('editPromptForm').style.display = 'none'; // Nasconde il modulo di modifica
    });

    // Aggiungi qui gli altri event listener come addPromptBtn, deleteCategoryBtn, ecc.
}

// Aggiungi il resto del codice qui
